(()=>{"use strict";var e,t,n={602:(e,t,n)=>{var o=n(687);const a=new o.q3;a.gravity.set(0,-9.82,0),a.broadphase=new o.BQ(a),a.allowSleep=!0;const r=new o.F5("default"),s=new o.kp(r,r,{friction:.5,restitution:.7});a.defaultContactMaterial=s;let i=[];const l=(e,t)=>{a.addBody(e),t&&i.push(e)},c=new o.hp,p=new o.uT({mass:0});let u,d;p.addShape(c),p.collisionFilterGroup=0,p.collisionFilterMask=0,a.addBody(p),self.addEventListener("message",(e=>{const{type:t,payload:n}=e.data;switch(t){case"CREATE_HOOP":(({position:e,boardPosition:t})=>{const n=o.np.createTorus(.35,.025,16,75),a=new o.uT({mass:0});a.position.set(...e),a.addShape(n,new o.AO(0,0,0),(new o._f).setFromAxisAngle(new o.AO(-1,0,0),.5*Math.PI));const r=new o.xu(new o.AO(.9125,.6095,.015));a.addShape(r,new o.AO(...t),(new o._f).setFromAxisAngle(new o.AO(0,1,0),.5*Math.PI)),a.addEventListener("collide",(e=>self.postMessage({type:"PLAY_SOUND",payload:{sound:"HOOP_HIT",impactVelocity:e.contact.getImpactVelocityAlongNormal()}}))),l(a)})(n);break;case"CREATE_BALL":(({radius:e,position:t})=>{const n=new o.aL(e),a=new o.uT({mass:1,position:new o.AO(...t),shape:n});var r=new o._f,s=new o._f;r.setFromAxisAngle(new o.AO(1,0,0),.5*Math.PI),s.setFromAxisAngle(new o.AO(0,0,1),.5*Math.PI);var i=s.mult(r);a.quaternion=i,a.sleep(),a.addEventListener("collide",(e=>self.postMessage({type:"PLAY_SOUND",payload:{sound:"BOUNCE",impactVelocity:e.contact.getImpactVelocityAlongNormal()}}))),l(a,!0)})(n);break;case"CREATE_FLOOR":(()=>{const e=new o.JO,t=new o.uT;t.mass=0,t.addShape(e),t.quaternion.setFromAxisAngle(new o.AO(-1,0,0),.5*Math.PI),l(t)})();break;case"CREATE_WALL":break;case"UPDATE":(()=>{let e=new Float32Array(3*i.length),t=new Float32Array(4*i.length);a.fixedStep(.016666666666666666);for(let n=0;n<i.length;n++){const o=i[n];e[3*n+0]=o.position.x,e[3*n+1]=o.position.y,e[3*n+2]=o.position.z,t[4*n+0]=o.quaternion.x,t[4*n+1]=o.quaternion.y,t[4*n+2]=o.quaternion.z,t[4*n+3]=o.quaternion.w}self.postMessage({type:"UPDATE",payload:{positions:e,quaternions:t}},[e.buffer,t.buffer])})();break;case"ADD_MOUSE_CONTRAINT":(({x:e,y:t,z:n,bodyID:r})=>{d=i[r],d.angularVelocity=new o.AO(0,0,0),p.position.set(e,t,n),u=new o.Qx(d,new o.AO(0,0,0),p,new o.AO(0,0,0)),a.addConstraint(u)})(n);break;case"MOVE_JOINT":(({x:e,y:t,z:n})=>{p.position.set(e,t,n),u.update()})(n);break;case"REMOVE_JOINT":a.removeConstraint(u),u=!1;break;case"THROW":(()=>{const e=new o.AO(d.velocity.x,d.velocity.y,d.velocity.z);d.applyImpulse(new o.AO(-Math.min(e.normalize(),4),0,0),new o.AO(0,0,0))})();break;default:console.error("Invalid type: "+t)}}))}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.m=n,a.x=()=>{var e=a.O(void 0,[687],(()=>a(602)));return a.O(e)},e=[],a.O=(t,n,o,r)=>{if(!n){var s=1/0;for(p=0;p<e.length;p++){for(var[n,o,r]=e[p],i=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(p--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[n,o,r]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"bundle.f95ce2bcd8d8ae94.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={602:1};a.f.i=(t,n)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunk=self.webpackChunk||[],n=t.push.bind(t);t.push=t=>{var[o,r,s]=t;for(var i in r)a.o(r,i)&&(a.m[i]=r[i]);for(s&&s(a);o.length;)e[o.pop()]=1;n(t)}})(),t=a.x,a.x=()=>a.e(687).then(t),a.x()})();
//# sourceMappingURL=bundle.d416cd61bc4364da.js.map